id: databricks-003
source_url: https://docs.databricks.com/aws/en/catalogs/create-catalog
title: Create Catalog in Databricks
platforms:
- Databricks
- AWS
description: Workflow to create a catalog in Databricks Unity Catalog, supporting
  standard, shared, and foreign catalog types based on user privileges and compute
  requirements.
prerequisites:
- User must be a Databricks metastore admin or have CREATE CATALOG privilege on the
  metastore.
- Compute resource must be on Databricks Runtime 11.3 or above with Unity Catalog-compliant
  access mode.
- SQL warehouses must support Unity Catalog.

initial_state:
  catalogs:
    hive_metastore:
      name: hive_metastore
      owner: system
      type: standard
      comment: Legacy Hive metastore catalog
  schemas:
    hive_metastore.default:
      catalog_name: hive_metastore
      schema_name: default
      owner: system
  tables: {}
  notebooks: {}
  clusters:
    unity-catalog-cluster:
      cluster_id: unity-catalog-cluster
      name: unity-catalog-cluster
      state: RUNNING
      node_type: i3.xlarge
      num_workers: 2
      spark_version: "13.3.x-scala2.12"
  jobs: {}
  permissions: []
  active_catalog: null

goal_state:
  catalogs:
    hive_metastore:
      name: hive_metastore
      owner: system
      type: standard
      comment: Legacy Hive metastore catalog
    my_catalog:
      name: my_catalog
      owner: admin
      type: standard
      comment: null
  schemas:
    hive_metastore.default:
      catalog_name: hive_metastore
      schema_name: default
      owner: system
  tables: {}
  notebooks:
    /Workspace/create-catalog-notebook:
      path: /Workspace/create-catalog-notebook
      language: sql
      cells: []
      attached_cluster_id: unity-catalog-cluster
  clusters:
    unity-catalog-cluster:
      cluster_id: unity-catalog-cluster
      name: unity-catalog-cluster
      state: RUNNING
      node_type: i3.xlarge
      num_workers: 2
      spark_version: "13.3.x-scala2.12"
  jobs: {}
  permissions:
  - principal: user_or_group
    privilege: USE CATALOG
    securable_type: CATALOG
    securable_name: my_catalog
  active_catalog: hive_metastore

steps:
- step_id: 1
  description: Create a new notebook in Databricks workspace for catalog creation
  method: ui
  sql_command: null
  api_call:
    tool: create_notebook
    parameters:
      path: /Workspace/create-catalog-notebook
      language: sql
  expected_state_change:
    notebooks:
      /Workspace/create-catalog-notebook:
        path: /Workspace/create-catalog-notebook
        language: sql
        cells: []
        attached_cluster_id: null
  verification:
    method: ui
    check: Notebook appears in workspace UI under user folder

- step_id: 2
  description: Attach the notebook to a compute cluster with appropriate runtime version
  method: ui
  sql_command: null
  api_call:
    tool: attach_to_cluster
    parameters:
      notebook_path: /Workspace/create-catalog-notebook
      cluster_id: unity-catalog-cluster
  expected_state_change:
    notebooks:
      /Workspace/create-catalog-notebook:
        attached_cluster_id: unity-catalog-cluster
  verification:
    method: ui
    check: Cluster status shows as attached to notebook in UI

- step_id: 3
  description: Set the catalog context in the notebook for Unity Catalog operations
  method: sql
  sql_command: USE CATALOG hive_metastore
  api_call:
    tool: use_catalog
    parameters:
      catalog_name: hive_metastore
  expected_state_change:
    active_catalog: hive_metastore
  verification:
    method: sql
    check: Run 'SHOW CURRENT CATALOG' to confirm hive_metastore is active

- step_id: 4
  description: Create a new catalog in Unity Catalog with specified type and properties
  method: sql
  sql_command: CREATE CATALOG IF NOT EXISTS my_catalog
  api_call:
    tool: create_catalog
    parameters:
      catalog_name: my_catalog
      type: standard
  expected_state_change:
    catalogs:
      my_catalog:
        name: my_catalog
        owner: admin
        type: standard
  verification:
    method: sql
    check: Run 'SHOW CATALOGS' to confirm 'my_catalog' is listed

- step_id: 5
  description: Grant necessary privileges on the new catalog to users or groups
  method: sql
  sql_command: GRANT USE CATALOG ON my_catalog TO `user_or_group`
  api_call:
    tool: grant_privilege
    parameters:
      privilege: USE CATALOG
      securable_type: CATALOG
      securable_name: my_catalog
      principal: user_or_group
  expected_state_change:
    permissions:
    - principal: user_or_group
      privilege: USE CATALOG
      securable_type: CATALOG
      securable_name: my_catalog
  verification:
    method: sql
    check: Run 'SHOW GRANTS ON CATALOG my_catalog' to confirm privileges
