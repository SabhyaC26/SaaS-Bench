id: databricks-004
source_url: https://docs.databricks.com/aws/en/schemas/create-schema
title: Create Schema in Databricks Unity Catalog
platforms:
- Databricks
- AWS
description: Workflow to create a schema in Databricks Unity Catalog, including setting
  up necessary permissions and configurations.
prerequisites:
- Unity Catalog metastore must be linked to the workspace.
- User must have USE CATALOG and CREATE SCHEMA permissions on the parent catalog.
- Cluster must use a Unity Catalog-compliant access mode or SQL warehouse must support
  Unity Catalog.

initial_state:
  catalogs:
    my_catalog:
      name: my_catalog
      owner: admin
      type: standard
      comment: User-created catalog for data management
  schemas: {}
  tables: {}
  notebooks: {}
  clusters:
    unity-catalog-cluster:
      cluster_id: unity-catalog-cluster
      name: unity-catalog-cluster
      state: RUNNING
      node_type: i3.xlarge
      num_workers: 2
      spark_version: "13.3.x-scala2.12"
  jobs: {}
  permissions: []
  active_catalog: null

goal_state:
  catalogs:
    my_catalog:
      name: my_catalog
      owner: admin
      type: standard
      comment: User-created catalog for data management
  schemas:
    my_catalog.my_schema:
      catalog_name: my_catalog
      schema_name: my_schema
      owner: admin
  tables: {}
  notebooks:
    /Workspace/Users/user/schema-creation:
      path: /Workspace/Users/user/schema-creation
      language: sql
      cells: []
      attached_cluster_id: unity-catalog-cluster
  clusters:
    unity-catalog-cluster:
      cluster_id: unity-catalog-cluster
      name: unity-catalog-cluster
      state: RUNNING
      node_type: i3.xlarge
      num_workers: 2
      spark_version: "13.3.x-scala2.12"
  jobs: {}
  permissions: []
  active_catalog: my_catalog

steps:
- step_id: 1
  description: Create a new notebook for schema creation in Databricks workspace
  method: ui
  sql_command: null
  api_call:
    tool: create_notebook
    parameters:
      path: /Workspace/Users/user/schema-creation
      language: sql
  expected_state_change:
    notebooks:
      /Workspace/Users/user/schema-creation:
        path: /Workspace/Users/user/schema-creation
        language: sql
        cells: []
        attached_cluster_id: null
  verification:
    method: ui_check
    criteria: Notebook appears in workspace directory

- step_id: 2
  description: Attach notebook to a Unity Catalog-compliant cluster
  method: ui
  sql_command: null
  api_call:
    tool: attach_to_cluster
    parameters:
      notebook_path: /Workspace/Users/user/schema-creation
      cluster_id: unity-catalog-cluster
  expected_state_change:
    notebooks:
      /Workspace/Users/user/schema-creation:
        attached_cluster_id: unity-catalog-cluster
  verification:
    method: ui_check
    criteria: Cluster status shows as attached in notebook UI

- step_id: 3
  description: Set the active catalog for schema creation
  method: sql
  sql_command: USE CATALOG my_catalog
  api_call:
    tool: use_catalog
    parameters:
      catalog_name: my_catalog
  expected_state_change:
    active_catalog: my_catalog
  verification:
    method: sql_query
    criteria: SELECT CURRENT_CATALOG() returns 'my_catalog'

- step_id: 4
  description: Create a new schema in the active catalog
  method: sql
  sql_command: CREATE SCHEMA IF NOT EXISTS my_schema
  api_call:
    tool: create_schema
    parameters:
      catalog_name: my_catalog
      schema_name: my_schema
  expected_state_change:
    schemas:
      my_catalog.my_schema:
        catalog_name: my_catalog
        schema_name: my_schema
        owner: admin
  verification:
    method: sql_query
    criteria: SHOW SCHEMAS IN my_catalog includes 'my_schema'
