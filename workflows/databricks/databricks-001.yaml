id: databricks-001
source_url: https://docs.databricks.com/aws/en/getting-started/create-table
title: Databricks Create Table Workflow
platforms:
- Databricks
- Unity Catalog
description: A workflow to create a table in Databricks using Unity Catalog and manage
  basic permissions.
prerequisites:
- A Databricks workspace enabled for Unity Catalog automatically
- Permissions to attach to a compute resource
initial_state:
  workspace: Exists with Unity Catalog enabled
  compute_resource: Available but not attached
  notebook: Not created
  table: Not created
goal_state:
  workspace: Configured with Unity Catalog
  compute_resource: Attached to notebook
  notebook: Created and configured with SQL commands
  table: Created in workspace catalog under default schema with sample data inserted
steps:
- step_id: 1
  description: Create a new SQL notebook in Databricks workspace
  method: ui
  sql_command: null
  api_call:
    tool: create_notebook
    parameters:
      language: SQL
      name: CreateTableNotebook
  expected_state_change:
    notebook: Created in workspace
  verification:
    method: Check sidebar for new notebook entry
    expected_output: Notebook visible in workspace sidebar
- step_id: 2
  description: Attach notebook to a compute resource
  method: ui
  sql_command: null
  api_call:
    tool: attach_to_cluster
    parameters:
      notebook_id: CreateTableNotebook
      cluster_id: <compute-resource-id>
  expected_state_change:
    compute_resource: Attached to notebook
  verification:
    method: Check notebook status
    expected_output: Notebook shows connected status to cluster
- step_id: 3
  description: Set the active catalog to workspace catalog
  method: sql
  sql_command: USE CATALOG <workspace-catalog>
  api_call:
    tool: use_catalog
    parameters:
      catalog_name: <workspace-catalog>
  expected_state_change:
    active_catalog: Set to workspace catalog
  verification:
    method: Run command and check output
    expected_output: Catalog set successfully
- step_id: 4
  description: Create a new table in the default schema
  method: sql
  sql_command: CREATE TABLE IF NOT EXISTS default.department(deptcode INT, deptname
    STRING, location STRING);
  api_call:
    tool: create_table
    parameters:
      catalog: <workspace-catalog>
      schema: default
      table: department
      columns:
      - name: deptcode
        type: INT
      - name: deptname
        type: STRING
      - name: location
        type: STRING
  expected_state_change:
    table: Created in default schema of workspace catalog
  verification:
    method: Check Catalog sidebar for table existence
    expected_output: Table 'department' visible under default schema
- step_id: 5
  description: Insert sample data into the department table
  method: sql
  sql_command: INSERT INTO default.department VALUES (10, 'FINANCE', 'EDINBURGH'),
    (20, 'SOFTWARE', 'PADDINGTON');
  api_call:
    tool: insert_into_table
    parameters:
      catalog: <workspace-catalog>
      schema: default
      table: department
      values:
      - deptcode: 10
        deptname: FINANCE
        location: EDINBURGH
      - deptcode: 20
        deptname: SOFTWARE
        location: PADDINGTON
  expected_state_change:
    table_data: Sample data inserted into department table
  verification:
    method: Run SELECT query on table
    expected_output: Returns 2 rows with inserted data
